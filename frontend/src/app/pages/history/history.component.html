<p-toast position="top-center" />

<aside id="image-container">
    <img src="/assets/images/SantaPresents2.gif" alt="Santa with Presents" />
</aside>

<section id="form-container">
    @if (!(yearsLoading$ | async)) {
        <form id="mainForm">
            Choose a year:
            <select
                name="selectedYear"
                id="selectedYear"
                [(ngModel)]="selectedYear"
                (ngModelChange)="onYearChange($event)"
            >
                @for (year of years; track year) {
                    <option [ngValue]="year">{{ year }}</option>
                }
            </select>
        </form>
    }

    @if (loading$ | async) {
        <div class="loading">Checking the archives...</div>
    }

    @if (!(recipientsLoading$ | async) && !(error$ | async)) {
        <table>
            <caption>
                <b>{{ selectedYear }}</b>
            </caption>
            <tr>
                <th>Santa</th>
                <th>Recipient</th>
            </tr>
            @for (recipient of recipients; track recipient) {
                <tr>
                    <td>{{ recipient.userName }}</td>
                    <td>{{ recipient.recipient }}</td>
                </tr>
            }
        </table>
        <a routerLink="/home" class="button">Back to Santa Home</a>
    }
</section>
